"use strict";(self.webpackChunkJobOpportunities_SPA=self.webpackChunkJobOpportunities_SPA||[]).push([[262],{5262:(R,_,s)=>{s.r(_),s.d(_,{JobOffersModule:()=>$});var c=s(6895),C=s(9471),a=s(4006),e=s(4650),x=s(1055),Z=s(7185),b=s(4859),f=s(3546),g=s(3238),O=s(7392),h=s(4633),m=s(7331);function T(o,n){if(1&o&&(e.TgZ(0,"mat-chip",15),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij("",t.name," ")}}function A(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-list-item",6),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.selected.emit(l))}),e.TgZ(1,"div",7)(2,"div",8)(3,"div",9)(4,"h4",10),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"p",10),e._uU(8),e.qZA(),e.TgZ(9,"p",10),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"mat-chip-list",11),e.YNc(13,T,2,1,"mat-chip",12),e.qZA()(),e._UZ(14,"span",13),e.TgZ(15,"button",14),e.NdJ("click",function(r){const d=e.CHM(t).$implicit;return e.oxw(2).deleted.emit(d.id),e.KtG(r.stopImmediatePropagation())}),e.TgZ(16,"mat-icon"),e._uU(17,"delete"),e.qZA()()()()()}if(2&o){const t=n.$implicit;e.xp6(5),e.hij("T\xedtulo: ",e.lcZ(6,4,t.title),""),e.xp6(3),e.hij(" Descripci\xf3n: ",t.description," "),e.xp6(2),e.hij(" V\xe1lida hasta: ",e.lcZ(11,6,t.validUntil)," "),e.xp6(3),e.Q6J("ngForOf",t.requiredSkills)}}function j(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e._uU(3," Mis ofertas creadas "),e.qZA()(),e.TgZ(4,"mat-card-content",2)(5,"mat-list",null,3),e.YNc(7,A,18,8,"mat-list-item",4),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.create.emit())}),e.TgZ(9,"mat-icon"),e._uU(10,"add"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.jobOffers)}}function k(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e._uU(3," A\xfan no ten\xe9s ninguna oferta creada. "),e.qZA()(),e.TgZ(4,"mat-card-content",16)(5,"p",17),e._uU(6," Hac\xe9 click para crear tu primer oferta"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.create.emit())}),e.TgZ(8,"mat-icon"),e._uU(9,"add"),e.qZA()()()()}}let y=(()=>{class o{constructor(){this.jobOffers=[],this.selected=new e.vpe,this.deleted=new e.vpe,this.create=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-offers-list"]],inputs:{jobOffers:"jobOffers"},outputs:{selected:"selected",deleted:"deleted",create:"create"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["emptyList",""],[1,"list-content"],["jobOffersList",""],[3,"click",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Crear una nueva oferta",1,"create-button",3,"click"],[3,"click"],[1,"gradient-border","mat-list-item-row-wrapper"],[1,"mat-list-item-row"],[1,"mat-list-item-column"],["matLine",""],["aria-label","Skills requeridos",1,"skills-list"],["color","accent","selected","",4,"ngFor","ngForOf"],[1,"flex"],["matLine","","mat-icon-button","","color","warn",3,"click"],["color","accent","selected",""],[1,"empty-list-content"],[1,"card-text"]],template:function(t,i){if(1&t&&(e.YNc(0,j,11,1,"mat-card",0),e.YNc(1,k,10,0,"ng-template",null,1,e.W1O)),2&t){const r=e.MAs(2);e.Q6J("ngIf",i.jobOffers.length>0)("ngIfElse",r)}},dependencies:[c.sg,c.O5,b.lW,f.a8,f.dk,f.dn,f.n5,g.X2,O.Hw,h.i$,h.Tg,m.qn,m.HS,c.rS,c.uU],styles:['.card-text[_ngcontent-%COMP%]{padding-top:.5rem}.empty-list-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-top:1rem}[_nghost-%COMP%]     .mat-list-item-content{display:inline!important}.list-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-grow:4}.flex[_ngcontent-%COMP%]{flex:1}.mat-list-item-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mat-list-item-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;flex-grow:1;z-index:2;background-color:#4d4d4d;padding:1rem;flex:1}.mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.skills-list[_ngcontent-%COMP%]{display:flex;flex-direction:row}mat-list-item-row-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.gradient-border[_ngcontent-%COMP%]{--border-width: 3px !important;position:relative;display:flex;justify-content:center;align-items:center;font-family:Lato,sans-serif;font-size:2.5rem;text-transform:uppercase;color:#fff;background:#222;border-radius:var(--border-width)}.gradient-border[_ngcontent-%COMP%]:after{position:absolute;content:"";top:calc(-1 * var(--border-width));left:calc(-1 * var(--border-width));z-index:1;width:calc(100% + var(--border-width) * 2);height:calc(100% + var(--border-width) * 2);background:linear-gradient(60deg,hsl(224deg,85%,66%),hsl(269deg,85%,66%),hsl(314deg,85%,66%),hsl(359deg,85%,66%),hsl(44deg,85%,66%),hsl(89deg,85%,66%),hsl(134deg,85%,66%),hsl(179deg,85%,66%));background-size:300% 300%;background-position:0 50%;border-radius:calc(2 * var(--border-width));animation:moveGradient 4s alternate infinite}@keyframes moveGradient{50%{background-position:100% 50%}}']}),o})();var S=s(8675),F=s(4004),w=s(529),N=s(4628);let q=(()=>{class o{constructor(t,i){this.http=t,this.envUrl=i,this.getSkillLevels=r=>this.http.get(this.createCompleteRoute(r,this.envUrl.urlAddress)),this.createCompleteRoute=(r,l)=>`${l}/${r}`}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(w.eN),e.LFG(N.a))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=s(9549),M=s(4144),u=s(9602),J=s(3805);const U=["skillNameInput"];function L(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.originalTitle)," ")}}function I(o,n){1&o&&e._uU(0,"Nueva Oferta")}function D(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip",21),e.NdJ("removed",function(){const l=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.remove(l))}),e._uU(1),e.TgZ(2,"button",22)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function E(o,n){if(1&o&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}let P=(()=>{class o{constructor(t){this.skillService=t,this.selectedSkills=[],this.originalTitle="",this.minDate=new Date,this.saved=new e.vpe,this.cancelled=new e.vpe}set jobOffer(t){!t||(this.currentJobOffer=JSON.parse(JSON.stringify(t)),this.originalTitle=t.title)}ngOnChanges(t){t.jobOffer.isFirstChange()||this.creationForm.setValue(this.currentJobOffer)}ngOnInit(){this.minDate.setDate(this.minDate.getDate()+1),this.creationForm=new a.cw({id:new a.NI(this.currentJobOffer.id),title:new a.NI(this.currentJobOffer.title,[a.kI.required]),description:new a.NI(this.currentJobOffer.description),validUntil:new a.NI(this.currentJobOffer.validUntil,[a.kI.required]),requiredSkills:new a.NI(this.currentJobOffer.requiredSkills,a.kI.required)}),this.skillService.getSkillLevels("skill").subscribe(t=>{this.availableSkills=t,this.filteredSkills=this.requiredSkills.valueChanges.pipe((0,S.O)(null),(0,F.U)(i=>i?this._filter(i):this.availableSkills.slice()))})}focusOutFunction(){this.skillNameInput.nativeElement.value=""}remove(t){const i=this.requiredSkills.value.indexOf(t);i>=0&&(this.requiredSkills.value.splice(i,1),this.requiredSkills.updateValueAndValidity())}selected(t){this.requiredSkills.value.push(t.option.value),this.skillNameInput.nativeElement.value="",this.requiredSkills.updateValueAndValidity()}_filter(t){console.log(t);const i=t.map(r=>r.name.toLowerCase());return this.availableSkills.filter(r=>!i.includes(r.name.toLowerCase()))}get requiredSkills(){return this.creationForm.get("requiredSkills")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-offer-details"]],viewQuery:function(t,i){if(1&t&&e.Gf(U,5),2&t){let r;e.iGM(r=e.CRH())&&(i.skillNameInput=r.first)}},inputs:{jobOffer:"jobOffer"},outputs:{saved:"saved",cancelled:"cancelled"},features:[e.TTD],decls:45,vars:19,consts:[[4,"ngIf","ngIfElse"],["elseBlock",""],[3,"formGroup","ngSubmit"],["color","accent",1,"full-width"],["type","text","matInput","","required","","placeholder","T\xedtulo","formControlName","title"],["type","text","matInput","","placeholder","Descripci\xf3n","formControlName","description"],["appearance","fill","color","accent",1,"date-field"],["matInput","","formControlName","validUntil",3,"matDatepicker","min"],["matSuffix","",3,"for"],["picker",""],["appearance","fill","color","accent",1,"example-chip-list"],["aria-label","Skill Selection","formControlName","requiredSkills"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Busc\xe1 y seleccion\xe1 los skills requeridos para el puesto",3,"matAutocomplete","matChipInputFor","focusout"],["skillNameInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-button","",3,"click"],["type","submit","mat-button","","color","accent",3,"disabled"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e.YNc(3,L,3,3,"span",0),e.YNc(4,I,1,0,"ng-template",null,1,e.W1O),e.qZA()(),e.TgZ(6,"form",2),e.NdJ("ngSubmit",function(){return i.saved.emit(i.creationForm.value)}),e.TgZ(7,"mat-card-content")(8,"mat-form-field",3),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"mat-form-field",3),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"V\xe1lida hasta"),e.qZA(),e._UZ(15,"input",7),e.TgZ(16,"mat-hint"),e._uU(17,"MM/DD/AAAA"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",8)(19,"mat-datepicker",null,9),e.qZA(),e.TgZ(21,"mat-form-field",10)(22,"mat-label"),e._uU(23,"Skills Requeridos"),e.qZA(),e.TgZ(24,"mat-chip-list",11,12),e.YNc(26,D,5,1,"mat-chip",13),e.TgZ(27,"input",14,15),e.NdJ("focusout",function(){return i.focusOutFunction()}),e.qZA()(),e.TgZ(29,"mat-autocomplete",16,17),e.NdJ("optionSelected",function(l){return i.selected(l)}),e.YNc(31,E,2,2,"mat-option",18),e.ALo(32,"async"),e.qZA()()(),e.TgZ(33,"mat-card-actions")(34,"button",19),e.NdJ("click",function(){return i.cancelled.emit()}),e._uU(35,"Cancel"),e.qZA(),e.TgZ(36,"button",20),e._uU(37,"Guardar"),e.qZA()()(),e._UZ(38,"hr"),e.TgZ(39,"pre"),e._uU(40),e.ALo(41,"json"),e.qZA(),e.TgZ(42,"pre"),e._uU(43),e.ALo(44,"json"),e.qZA()()),2&t){const r=e.MAs(5),l=e.MAs(20),d=e.MAs(25),v=e.MAs(30);e.xp6(3),e.Q6J("ngIf",null==i.currentJobOffer?null:i.currentJobOffer.id)("ngIfElse",r),e.xp6(3),e.Q6J("formGroup",i.creationForm),e.xp6(9),e.Q6J("matDatepicker",l)("min",i.minDate),e.xp6(3),e.Q6J("for",l),e.xp6(8),e.Q6J("ngForOf",i.requiredSkills.value),e.xp6(1),e.Q6J("matAutocomplete",v)("matChipInputFor",d),e.xp6(4),e.Q6J("ngForOf",e.lcZ(32,13,i.filteredSkills)),e.xp6(5),e.Q6J("disabled",!i.creationForm.valid),e.xp6(4),e.Oqu(e.lcZ(41,15,i.creationForm.value)),e.xp6(3),e.Oqu(e.lcZ(44,17,i.creationForm.valid))}},dependencies:[c.sg,c.O5,b.lW,f.a8,f.dk,f.dn,f.n5,f.hq,p.KE,p.bx,p.hX,p.R9,O.Hw,M.Nt,g.ey,u.Mq,u.hl,u.nW,m.qn,m.HS,m.oH,m.qH,J.XC,J.ZL,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,c.Ov,c.Ts,c.rS],styles:["mat-card-content[_ngcontent-%COMP%]{margin-top:1rem}.mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end}.date-field[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),o})();function Q(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-job-offer-details",3),e.NdJ("cancelled",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.reset())})("saved",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.saveJobOffer(r))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("jobOffer",t.selectedJobOffer)}}const G={id:"",title:"",description:"",validUntil:"",requiredSkills:new Array};let H=(()=>{class o{constructor(t,i){this.repository=t,this.toastr=i,this.jobOffers=[],this.getAllJobOffers=()=>{this.repository.getJobOffers("companyAgent/jobOffer").subscribe(l=>{this.jobOffers=l})}}ngOnInit(){this.getAllJobOffers()}selectJobOffer(t){this.selectedJobOffer=t}saveJobOffer(t){t.id?this.repository.updateJobOffer("jobOffer",t).subscribe({next:()=>{let i=this.jobOffers.map(r=>r.id).indexOf(t.id);this.jobOffers[i]=t,this.selectedJobOffer=null,this.toastr.success("La oferta se actualiz\xf3 con \xe9xito")},error:i=>{}}):this.repository.createJobOffer("jobOffer",t).subscribe({next:i=>{this.jobOffers.push(i),this.selectedJobOffer=null,this.toastr.success("La oferta se cre\xf3 con \xe9xito")},error:i=>{}})}deleteJobOffer(t){this.repository.delete(t).subscribe({next:()=>{let i=this.jobOffers.map(r=>r.id).indexOf(t);this.jobOffers.splice(i,1)},error:i=>{}})}create(t){this.selectedJobOffer=G}reset(){this.selectedJobOffer=null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.I),e.Y36(Z._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-offers"]],decls:3,vars:2,consts:[[1,"jobs-container"],[1,"offers-list",3,"jobOffers","selected","deleted","create"],[3,"jobOffer","cancelled","saved",4,"ngIf"],[3,"jobOffer","cancelled","saved"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-job-offers-list",1),e.NdJ("selected",function(l){return i.selectJobOffer(l)})("deleted",function(l){return i.deleteJobOffer(l)})("create",function(l){return i.create(l)}),e.qZA(),e.YNc(2,Q,1,1,"app-job-offer-details",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("jobOffers",i.jobOffers),e.xp6(1),e.Q6J("ngIf",i.selectedJobOffer))},dependencies:[c.O5,y,P],styles:[".jobs-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.offers-list[_ngcontent-%COMP%]{margin-right:1rem;margin-left:1rem;flex-grow:1}"]}),o})();var Y=s(7337);let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,Y.Bz.forChild([{path:"",component:H}]),C.q,a.u5,a.UX]}),o})()}}]);