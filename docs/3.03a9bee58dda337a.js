"use strict";(self.webpackChunkJobOpportunities_SPA=self.webpackChunkJobOpportunities_SPA||[]).push([[3],{3:(G,b,i)=>{i.r(b),i.d(b,{AuthenticationModule:()=>V});var h=i(6895),t=i(4006),e=i(4650),_=i(9722);let T=(()=>{class r{constructor(){this.validateConfirmPassword=n=>o=>{const m=o.value;return""===m?null:m!==n.value?{mustMatch:!0}:null}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var u=i(7337),w=i(7185),p=i(4859),c=i(3546),g=i(9549),A=i(7392),Z=i(4144),U=i(811),I=i(1572);function y(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe ingresar un nombre "),e.qZA())}function N(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe ingresar un apellido "),e.qZA())}function x(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe ingresar un email "),e.qZA())}function M(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe ingresar una contrase\xf1a "),e.qZA())}function q(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor confirme la contrase\xf1a "),e.qZA())}function O(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe ingresar una contrase\xf1a equivalente "),e.qZA())}function P(r,a){if(1&r&&(e.TgZ(0,"p",16),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Oqu(n.errorMessage)}}const S=function(){return["/auth/login"]};function J(r,a){if(1&r&&(e.TgZ(0,"div",17)(1,"a",18),e._uU(2,"Ingresar"),e.qZA(),e.TgZ(3,"button",19),e._uU(4,"Crear"),e.qZA()()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("routerLink",e.DdM(2,S)),e.xp6(2),e.Q6J("disabled",!n.registerForm.valid)}}function F(r,a){1&r&&e._UZ(0,"mat-spinner",20),2&r&&e.Q6J("diameter",20)}let E=(()=>{class r{constructor(n,o,m,f){this.authService=n,this.passConfValidator=o,this.router=m,this.toastrSerive=f,this.showSpinner=!1,this.errorMessage="",this.validateControl=s=>this.registerForm.get(s).invalid&&this.registerForm.get(s).touched,this.hasError=(s,l)=>this.registerForm.get(s).hasError(l),this.registerUser=s=>{this.showSpinner=!0,this.showError=!1;const l={...s};this.authService.registerUser("auth/register",{firstName:l.firstName,lastName:l.lastName,email:l.email,password:l.password,confirmPassword:l.confirm,userType:l.userType}).subscribe({next:d=>{this.router.navigate(["/auth/login"]),this.toastrSerive.success("Por favor inicie sesi\xf3n","Usuario registrado correctamente!"),this.showSpinner=!1},error:d=>{console.log(d),this.errorMessage=d,this.showError=!0,this.showSpinner=!1}})}}ngOnInit(){this.registerForm=new t.cw({firstName:new t.NI("",[t.kI.required]),lastName:new t.NI("",[t.kI.required]),email:new t.NI("",[t.kI.required,t.kI.email]),password:new t.NI("",[t.kI.required]),confirm:new t.NI(""),userType:new t.NI("Candidate",[t.kI.required])}),this.registerForm.get("confirm").setValidators([t.kI.required,this.passConfValidator.validateConfirmPassword(this.registerForm.get("password"))])}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(_.$),e.Y36(T),e.Y36(u.F0),e.Y36(w._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register-user"]],decls:46,vars:10,consts:[[1,"gradient-border"],[1,"register-container"],[3,"formGroup","ngSubmit"],["formControlName","userType","aria-label","Tipo de ingreso",1,"user-type-selector"],["value","Candidate"],["value","CompanyAgent"],["appearance","standard","color","accent"],["matInput","","placeholder","Juan","formControlName","firstName"],[4,"ngIf"],["matInput","","placeholder","Perez","formControlName","lastName"],["matInput","","placeholder","ejemplo@mail.com","formControlName","email"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","confirm"],["class","error",4,"ngIf"],["class","button",4,"ngIf","ngIfElse"],["spinner",""],[1,"error"],[1,"button"],["mat-button","",3,"routerLink"],["type","submit","mat-button","",3,"disabled"],["color","accent",3,"diameter"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-title"),e._uU(3,"Alta de Usuario"),e.qZA(),e.TgZ(4,"mat-card-content")(5,"form",2),e.NdJ("ngSubmit",function(){return o.registerUser(o.registerForm.value)}),e.TgZ(6,"div")(7,"mat-label"),e._uU(8," Tipo de usuario: "),e.qZA(),e.TgZ(9,"mat-button-toggle-group",3)(10,"mat-button-toggle",4)(11,"mat-icon"),e._uU(12,"school"),e.qZA()(),e.TgZ(13,"mat-button-toggle",5)(14,"mat-icon"),e._uU(15,"work"),e.qZA()()()(),e.TgZ(16,"mat-form-field",6)(17,"mat-label"),e._uU(18,"Nombre"),e.qZA(),e._UZ(19,"input",7),e.YNc(20,y,2,0,"mat-error",8),e.qZA(),e.TgZ(21,"mat-form-field",6)(22,"mat-label"),e._uU(23,"Apellido"),e.qZA(),e._UZ(24,"input",9),e.YNc(25,N,2,0,"mat-error",8),e.qZA(),e.TgZ(26,"mat-form-field",6)(27,"mat-label"),e._uU(28,"Email"),e.qZA(),e._UZ(29,"input",10),e.YNc(30,x,2,0,"mat-error",8),e.qZA(),e.TgZ(31,"mat-form-field",6)(32,"mat-label"),e._uU(33,"Contrase\xf1a"),e.qZA(),e._UZ(34,"input",11),e.YNc(35,M,2,0,"mat-error",8),e.qZA(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38,"Confirm\xe1 contrase\xf1a"),e.qZA(),e._UZ(39,"input",12),e.YNc(40,q,2,0,"mat-error",8),e.YNc(41,O,2,0,"mat-error",8),e.qZA(),e.YNc(42,P,2,1,"p",13),e.YNc(43,J,5,3,"div",14),e.YNc(44,F,1,1,"ng-template",null,15,e.W1O),e.qZA()()()()),2&n){const m=e.MAs(45);e.xp6(5),e.Q6J("formGroup",o.registerForm),e.xp6(15),e.Q6J("ngIf",o.validateControl("firstName")&&o.hasError("firstName","required")),e.xp6(5),e.Q6J("ngIf",o.validateControl("lastName")&&o.hasError("lastName","required")),e.xp6(5),e.Q6J("ngIf",o.validateControl("email")&&o.hasError("email","required")),e.xp6(5),e.Q6J("ngIf",o.validateControl("password")&&o.hasError("password","required")),e.xp6(5),e.Q6J("ngIf",o.validateControl("confirm")&&o.hasError("confirm","required")),e.xp6(1),e.Q6J("ngIf",o.validateControl("confirm")&&o.hasError("confirm","mustMatch")),e.xp6(1),e.Q6J("ngIf",o.showError),e.xp6(1),e.Q6J("ngIf",!o.showSpinner)("ngIfElse",m)}},dependencies:[h.O5,u.yS,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,p.lW,p.zs,c.a8,c.dn,c.n5,g.TO,g.KE,g.hX,A.Hw,Z.Nt,U.A9,U.Yi,I.Ou],styles:['[_nghost-%COMP%]{display:flex;justify-content:center}em[_ngcontent-%COMP%]{color:#e71515;font-weight:700}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}mat-button-toggle-group[_ngcontent-%COMP%]{margin:auto}mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center}form[_ngcontent-%COMP%]{max-width:20rem}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.error[_ngcontent-%COMP%]{color:#e71515;font-size:small}.register-container[_ngcontent-%COMP%]{background-color:#01000a;padding:2rem;margin:.3rem;color:#ffffffb3;border-radius:.3rem;z-index:2;max-width:30rem}.mat-spinner[_ngcontent-%COMP%]{margin:auto}.gradient-border[_ngcontent-%COMP%]{--border-width: 3px !important;position:relative;display:flex;justify-content:center;align-items:center;font-family:Lato,sans-serif;font-size:2.5rem;text-transform:uppercase;color:#fff;background:#222;border-radius:var(--border-width)}.gradient-border[_ngcontent-%COMP%]:after{position:absolute;content:"";top:calc(-1 * var(--border-width));left:calc(-1 * var(--border-width));z-index:1;width:calc(100% + var(--border-width) * 2);height:calc(100% + var(--border-width) * 2);background:linear-gradient(60deg,hsl(224deg,85%,66%),hsl(269deg,85%,66%),hsl(314deg,85%,66%),hsl(359deg,85%,66%),hsl(44deg,85%,66%),hsl(89deg,85%,66%),hsl(134deg,85%,66%),hsl(179deg,85%,66%));background-size:300% 300%;background-position:0 50%;border-radius:calc(2 * var(--border-width));animation:moveGradient 4s alternate infinite}@keyframes moveGradient{50%{background-position:100% 50%}}.mat-button-toggle-label-content[_ngcontent-%COMP%]{line-height:16px!important}']}),r})();function Y(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Username is required "),e.qZA())}function k(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Password is required "),e.qZA())}function Q(r,a){if(1&r&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Oqu(n.errorMessage)}}const z=function(){return["/auth/register"]};function L(r,a){if(1&r&&(e.TgZ(0,"div",11)(1,"a",12),e._uU(2,"Registrarse"),e.qZA(),e.TgZ(3,"button",13),e._uU(4,"Entrar"),e.qZA()()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("routerLink",e.DdM(2,z)),e.xp6(2),e.Q6J("disabled",!n.loginForm.valid)}}function R(r,a){1&r&&e._UZ(0,"mat-spinner",14),2&r&&e.Q6J("diameter",20)}let v=(()=>{class r{constructor(n,o,m,f){this.authService=n,this.router=o,this.route=m,this.toastrSerive=f,this.showSpinner=!1,this.errorMessage="",this.validateControl=s=>this.loginForm.get(s).invalid&&this.loginForm.get(s).touched,this.hasError=(s,l)=>this.loginForm.get(s).hasError(l),this.loginUser=s=>{this.showSpinner=!0,this.showError=!1;const l={...s};this.authService.loginUser("auth/token",{userName:l.username,password:l.password}).subscribe({next:d=>{localStorage.setItem("token",d.accessToken),localStorage.setItem("user_type",this.authService.getUserRole()),this.authService.sendAuthStateChangeNotification(d.isAuthSuccessful),this.toastrSerive.success("Ingres\xf3 correctamente","Bienvenido!"),this.router.navigate([this.returnUrl])},error:d=>{this.errorMessage="Usuario y/o contrase\xf1a incorrectos",this.toastrSerive.error("Hubo un error","Intente nuevamente"),this.showError=!0,this.showSpinner=!1}})}}ngOnInit(){this.loginForm=new t.cw({username:new t.NI("",[t.kI.required]),password:new t.NI("",[t.kI.required]),userType:new t.NI("candidate")}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(_.$),e.Y36(u.F0),e.Y36(u.gz),e.Y36(w._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:16,vars:6,consts:[[1,"gradient-border"],[1,"register-container"],[3,"formGroup","ngSubmit"],["color","accent"],["type","text","matInput","","placeholder","Username","formControlName","username"],[4,"ngIf"],["type","password","matInput","","placeholder","Password","formControlName","password"],["class","error",4,"ngIf"],["class","button",4,"ngIf","ngIfElse"],["spinner",""],[1,"error"],[1,"button"],["mat-button","",3,"routerLink"],["type","submit","mat-button","",3,"disabled"],["color","accent",3,"diameter"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-title"),e._uU(3,"Ingresar"),e.qZA(),e.TgZ(4,"mat-card-content")(5,"form",2),e.NdJ("ngSubmit",function(){return o.loginUser(o.loginForm.value)}),e.TgZ(6,"mat-form-field",3),e._UZ(7,"input",4),e.YNc(8,Y,2,0,"mat-error",5),e.qZA(),e.TgZ(9,"mat-form-field",3),e._UZ(10,"input",6),e.YNc(11,k,2,0,"mat-error",5),e.qZA(),e.YNc(12,Q,2,1,"p",7),e.YNc(13,L,5,3,"div",8),e.YNc(14,R,1,1,"ng-template",null,9,e.W1O),e.qZA()()()()),2&n){const m=e.MAs(15);e.xp6(5),e.Q6J("formGroup",o.loginForm),e.xp6(3),e.Q6J("ngIf",o.validateControl("username")&&o.hasError("username","required")),e.xp6(3),e.Q6J("ngIf",o.validateControl("password")&&o.hasError("password","required")),e.xp6(1),e.Q6J("ngIf",o.showError),e.xp6(1),e.Q6J("ngIf",!o.showSpinner)("ngIfElse",m)}},dependencies:[h.O5,u.yS,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,p.lW,p.zs,c.a8,c.dn,c.n5,g.TO,g.KE,Z.Nt,I.Ou],styles:['[_nghost-%COMP%]{display:flex;justify-content:center}form[_ngcontent-%COMP%]{max-width:20rem}.mat-form-field[_ngcontent-%COMP%]{min-width:20rem;margin:1rem 0}mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.error[_ngcontent-%COMP%]{color:red}.register-container[_ngcontent-%COMP%]{background-color:#01000a;padding:2rem;margin:.3rem;color:#ffffffb3;border-radius:.3rem;z-index:2}.mat-spinner[_ngcontent-%COMP%]{margin:auto}.gradient-border[_ngcontent-%COMP%]{--border-width: 3px !important;position:relative;display:flex;justify-content:center;align-items:center;font-family:Lato,sans-serif;font-size:2.5rem;text-transform:uppercase;color:#fff;background:#222;border-radius:var(--border-width)}.gradient-border[_ngcontent-%COMP%]:after{position:absolute;content:"";top:calc(-1 * var(--border-width));left:calc(-1 * var(--border-width));z-index:1;width:calc(100% + var(--border-width) * 2);height:calc(100% + var(--border-width) * 2);background:linear-gradient(60deg,hsl(224deg,85%,66%),hsl(269deg,85%,66%),hsl(314deg,85%,66%),hsl(359deg,85%,66%),hsl(44deg,85%,66%),hsl(89deg,85%,66%),hsl(134deg,85%,66%),hsl(179deg,85%,66%));background-size:300% 300%;background-position:0 50%;border-radius:calc(2 * var(--border-width));animation:moveGradient 4s alternate infinite}@keyframes moveGradient{50%{background-position:100% 50%}}']}),r})();var j=i(9471);let V=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[h.ez,u.Bz.forChild([{path:"register",component:E}]),u.Bz.forChild([{path:"login",component:v}]),u.Bz.forChild([{path:"",component:v}]),u.Bz.forChild([{path:"*",component:v}]),t.UX,j.q]}),r})()}}]);